import sys
sys.path.append('..')

from parse import mavutil

def send(b, mav):
    m = mav.mav.decode(bytearray(b0))
    mav.mav.send(m)

def wait(msg_type, mav, n=100):
    for i in range(n):
        m = mav.recv_msg():
            if m.get_type() == msg_type():
                print(m)
                break


if __name__ == '__main__':

    bc = b'\xfe\x04\x02\xff\x00,\x0b\x00\x01\x01\xdc\xf8'
    b0 = b"\xfe%\xed\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xfc\xda\x1fB\x03\xac\xe8Bq\xacoB\x00\x00\x10\x00\x01\x01\x00\x00\x01Th"
    b1 = b"\xfe%\xee\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00 A\x01\x00\x16\x00\x01\x01\x03\x00\x01\x94\xe5"
    b2 = b"\xfe%\xef\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00*\xdb\x1fB\xfd\xab\xe8B\x00\x00\xa0A\x02\x00\x10\x00\x01\x01\x03\x00\x01\xde\n"
    b3 = b"\xfe%\xf0\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00S\xdb\x1fB^\xac\xe8B\x00\x00\xc8A\x03\x00\x10\x00\x01\x01\x03\x00\x01\\\xfb"
    b4 = b"\xfe%\xf1\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1e\xdb\x1fBj\xac\xe8B\x00\x00\xa0A\x04\x00\x10\x00\x01\x01\x03\x00\x01{p"
    b5 = b"\xfe%\xf2\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:\xdb\x1fB\xce\xac\xe8B\x00\x00\xf0A\x05\x00\x10\x00\x01\x01\x03\x00\x01\x1dT"
    b5_ =  b"\xfe%\xf4\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00:\xdb\x1fB\xce\xac\xe8B\x00\x00\xf0A\x05\x00\x10\x00\x01\x01\x03\x00\x01\xc6\x83"
    b6 = b"\xfe%\xf5\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00j\xdb\x1fB\xc6\xac\xe8B\x00\x00\xa0A\x06\x00\x10\x00\x01\x01\x03\x00\x01U "
    b6_ = b"\xfe%\xf7\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00j\xdb\x1fB\xc6\xac\xe8B\x00\x00\xa0A\x06\x00\x10\x00\x01\x01\x03\x00\x01\x1cm"
    b7 = b"\xfe%\xf8\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00N\xdb\x1fB%\xad\xe8B\x00\x00pA\x07\x00\x10\x00\x01\x01\x03\x00\x01\x8ah"
    b7_ = b"\xfe%\xfa\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00N\xdb\x1fB%\xad\xe8B\x00\x00pA\x07\x00\x10\x00\x01\x01\x03\x00\x01\xc3%"
    b8 = b"\xfe%\xfb\xff\xbe\'\x00\x00@@\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00w\xdb\x1fB>\xad\xe8B\x00\x00HB\x08\x00\x12\x00\x01\x01\x03\x00\x01Ux"
    b9 = b"\xfe%\xfc\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xa0A\t\x00\x14\x00\x01\x01\x03\x00\x011\x1e"
    b10 = b"\xfe%\xfe\xff\xbe\'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xdb\x1fB4\xac\xe8B\x00\x00\x80?\n\x00\x15\x00\x01\x01\x03\x00\x01\xe6r"
    ba = b'\xfe\x03\xff\xff\xbe/\x01\x01\x00\x01Z'

    mission_request = 'MISSION_REQUEST'
    mission_ack = 'MISSION_ACK'
    
    # mav = mavutil.mavlink_connection('udp:192.168.4.2:14550')
    mav = mavutil.mavlink_connection('udp:192.168.42.1:14550')
    

    
